function getXHR(){
    var xhrObject = null;
    if(window.XMLHttpRequest){
        xhrObject = new XMLHttpRequest();
    }else{
        alert("Votre navigateur actuelle ne supporte pas les XMLHttpRequest.\n"+
        "Veuillez essayer avec un autre navigateur");
        xhrObject = false;
    }
    return xhrObject;
}
function chargementFichierJson(){
    const xhrObject = getXHR();
    xhrObject.onload=function(){
        fichierJson(this.responseText)
    };
    xhrObject.open("GET","./data/products.json");
    xhrObject.send();
}

function fichierJson(json){
    console.log("test2");
    var ObjJSON=JSON.parse(json);
    ObjJSON.sort(function(a,b){
        return a.name.localeCompare(b.name);
    });
    console.log(ObjJSON)
    let listDeProduits=document.getElementById("products-list");
    console.log(ObjJSON.length);
    for (var i = 0; i < ObjJSON.length; i++){
        if (i==0){
            console.log("<img src=\""+ ObjJSON[i].image +"\">\"")
            listDeProduits.innerHTML="<div class=\"product\">\n<a href=\"./product.html\"\n"
            +"title=\"En savoir plus...\">\n"
            +"<h2>"+ObjJSON[i].name+"</h2>\n"
            +"<img src=\"./assets/img/"+ ObjJSON[i].image +"\">\n"
            +"<p class=\"price\"><small>Prix</small>"+ ObjJSON[i].price +"&thinsp;$</p>\n"
            +"</a>\n"
            +"</div>\n";
        }else{
            listDeProduits.innerHTML+="<div class=\"product\">\n<a href=\"./product.html\"\n"
            +"title=\"En savoir plus...\">\n"
            +"<h2>"+ObjJSON[i].name+"</h2>\n"
            +"<img src=\"./assets/img/"+ ObjJSON[i].image +"\">\n"
            +"<p class=\"price\"><small>Prix</small>"+ ObjJSON[i].price +"&thinsp;$</p>\n"
            +"</a>\n"
            +"</div>\n";
        }
    }
    //console.log(listDeProduits.innerHTML);
}


// const 
// $(function(){
//     if ( document.URL.includes("products.html") ) {
//         var jsonFile="./data/products.json";
//         $.getJSON(jsonFile, function(json){
//             chargement(json);
//         });
//     }
    
// });
// function fichierJson(){
    
// }
// function chargement(json){
    
// }